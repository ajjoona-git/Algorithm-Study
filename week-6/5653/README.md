# 5653. 줄기세포배양

## 문제 출처
[SWEA](https://swexpertacademy.com/main/talk/solvingClub/problemView.do?solveclubId=AZgvQCv6GNXHBIT9&contestProbId=AWXRJ8EKe48DFAUo&probBoxId=AZk76kyqM3DHBITM&type=PROBLEM&problemBoxTitle=9%EC%9B%94+3%EC%A3%BC%EC%B0%A8+%289%2F21%EA%B9%8C%EC%A7%80+%ED%91%B8%EC%8B%9C%EC%98%A4%29&problemBoxCnt=3)

## 💡 접근 방식

### 1. 사용 알고리리즘
* **너비 우선 탐색 (BFS, Breadth-First Search)**
* **시뮬레이션 (Simulation)**
* **큐 (Queue) / 데크 (deque)**

### 2. 문제 풀이 과정
1.  **문제 모델링**: 줄기세포의 생명주기(비활성 -> 활성 -> 죽음)와 번식 과정을 시간(K)에 따라 시뮬레이션하는 문제입니다. 각 세포의 상태를 `(시간, 위치, 생명력, 카운트다운, 활성 여부)` 튜플로 정의하고, **너비 우선 탐색(BFS)** 방식을 사용하여 시간의 흐름에 따른 상태 변화를 탐색합니다.
2.  **초기화**: 초기에 존재하는 모든 줄기세포의 상태 정보를 큐에 넣습니다. 이때, 동시에 번식할 경우 생명력이 높은 세포가 우선권을 갖는다는 규칙을 일부 반영하기 위해, 초기 세포들을 생명력 기준으로 내림차순 정렬하여 큐에 추가합니다. `visited` set을 통해 이미 세포가 차지한 공간을 기록합니다.
3.  **BFS를 이용한 시뮬레이션**:
    * 큐에서 세포의 상태를 하나씩 꺼내어 처리합니다.
    * **상태 전이**:
        * **비활성 상태**: `countdown`을 1씩 감소시키며 다음 시간의 상태를 다시 큐에 넣습니다. `countdown`이 0이 되면 활성 상태로 전환됩니다.
        * **활성 상태**: `countdown`을 1씩 감소시키며 다음 시간의 상태를 다시 큐에 넣습니다. `countdown`이 0이 되면 죽은 세포가 되어 더 이상 큐에 추가되지 않습니다.
    * **번식**: 세포가 활성화되는 순간 또는 활성 상태일 때, 상하좌우 인접한 칸 중 아직 다른 세포가 없는(`not in visited`) 곳으로 새로운 비활성 상태의 세포를 번식시킵니다. 새로 번식된 세포의 정보와 위치를 큐와 `visited`에 추가합니다.
4.  **결과 도출**: 큐에서 꺼낸 세포의 시간(`t`)이 `K`가 될 때까지 위 과정을 반복합니다. `t`가 `K`인 시점에 큐에 남아있는 세포들은 K시간 후 살아있는 세포들이며, 이들의 개수를 세어 최종 결과로 반환합니다.

## 💡 오류 분석 및 해결

### 1. 문제 원인
* **동시 번식 처리 오류**: BFS는 큐에 들어온 순서대로 노드를 처리하는 **선착순 방식**입니다. 따라서 서로 다른 두 세포가 같은 시간에 동일한 빈 칸으로 번식을 시도할 경우, 큐에서 먼저 처리되는 세포가 해당 칸을 차지하게 됩니다. 이는 '생명력이 높은 세포가 우선권을 갖는다'는 문제의 핵심 규칙을 정확히 구현하지 못하여 오답을 유발합니다.
* **연속 번식 오류**: 현재 코드는 활성화된 세포가 살아있는 매 시간마다 번식을 시도할 수 있는 구조입니다. 하지만 문제의 조건은 '활성화된 후 첫 1시간 동안'만 번식해야 하므로, 불필요한 번식이 발생하여 오답의 원인이 됩니다.

### 2. 해결 방법
* **시간 단위(Time-step) 시뮬레이션으로 변경**: 단순 BFS 대신, **시간(hour)을 기준으로 외부 루프**를 돌리는 방식으로 변경해야 합니다.
    1.  매 시간마다, 번식이 일어날 모든 세포를 찾아 '번식할 위치'와 '생명력' 정보를 임시 저장소에 기록합니다.
    2.  해당 시간의 모든 세포 확인이 끝나면, 임시 저장소를 기반으로 각 위치에 대해 가장 높은 생명력을 가진 세포만 최종적으로 번식시킵니다.
    3.  그 후, 모든 세포의 상태(카운트다운 감소 등)를 다음 시간으로 업데이트합니다.
* **번식 조건 수정**: 세포의 상태에 '번식 완료 여부'와 같은 플래그를 추가하거나, 비활성 상태에서 활성 상태로 전환되는 바로 그 시점에만 번식 로직이 단 한 번 실행되도록 조건을 명확히 수정해야 합니다.



---

## 💻 코드
* [5653.py](5653.py)