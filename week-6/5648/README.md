# 5648. 원자 소멸 시뮬레이션

## 문제 출처
[SWEA](https://swexpertacademy.com/main/talk/solvingClub/problemView.do?solveclubId=AZgvQCv6GNXHBIT9&contestProbId=AWXRFInKex8DFAUo&probBoxId=AZk76kyqM3DHBITM&type=PROBLEM&problemBoxTitle=9%EC%9B%94+3%EC%A3%BC%EC%B0%A8+%289%2F21%EA%B9%8C%EC%A7%80+%ED%91%B8%EC%8B%9C%EC%98%A4%29&problemBoxCnt=3)

## 💡 접근 방식

### 1. 사용 알고리즘
* **완전 탐색 (Brute-force Search)**
* **정렬 (Sorting)**
* **구현 (Implementation)**
* **시뮬레이션 (Simulation)**

### 2. 문제 풀이 과정
1.  [문제에 대한 간략한 모델링 또는 핵심 아이디어를 설명합니다.]
    * 시간의 흐름에 따라 원자를 직접 이동시키는 시뮬레이션은 좌표와 시간이 연속적이라 구현이 복잡합니다.
    * 대신, 관점을 바꿔 **모든 원자 쌍에 대해 충돌이 일어나는지 여부와 그 시간(거리)을 미리 계산**하는 **이벤트 중심(event-centric)** 접근법을 사용합니다.

2.  [코드의 첫 번째 주요 단계에 대한 설명을 작성합니다.]
    * **모든 충돌 가능성 탐색**: 이중 `for`문을 사용하여 모든 원자 쌍(`N C 2`)에 대해 `check_collision` 함수를 호출합니다.
    * `check_collision` 함수는 두 원자의 상대 위치(`dx`, `dy`)와 이동 방향을 분석하여, 서로 마주 보고 달려오는 네 가지 경우(수평, 수직, 대각선 2종류)에 해당하는지 판단합니다.
    * 만약 충돌 가능성이 있다면, `(충돌까지의 거리, 원자1 인덱스, 원자2 인덱스)` 튜플을 `collidable_pairs` 리스트에 추가합니다.

3.  [코드의 두 번째 주요 단계에 대한 설명을 작성합니다.]
    * **충돌 이벤트 정렬**: 모든 충돌 가능성을 찾은 후, `collidable_pairs` 리스트를 **충돌까지의 거리를 기준으로 오름차순 정렬**합니다. 이는 시간 순서대로 충돌 이벤트를 처리하기 위함입니다.

4.  [코드의 논리적 흐름에 따라 필요한 만큼 단계를 추가합니다.]
    * **에너지 계산**: 정렬된 충돌 이벤트 리스트를 순회하며 에너지를 계산합니다.
    * `records` 리스트를 사용하여 각 원자가 **어떤 거리(시간)에서 충돌했는지** 기록합니다. 이는 3개 이상의 원자가 한 지점에서 동시에 충돌하는 경우를 올바르게 처리하기 위함입니다.
    * `(거리, 원자 i, 원자 j)` 이벤트를 처리할 때,
        * `i`와 `j`가 모두 처음 충돌하는 경우: `에너지 += (i의 에너지 + j의 에너지)`
        * `i`는 처음이지만 `j`는 같은 거리에서 이미 다른 원자와 충돌 기록이 있는 경우: `에너지 += i의 에너지` (기존 충돌에 `i`가 합류)
        * 이와 같은 방식으로 중복 계산 없이 에너지를 누적합니다.

5.  [최종 결과를 도출하는 과정을 설명하며 마무리합니다.]
    * 모든 충돌 이벤트를 처리하고 나면, 누적된 `energy` 값이 방출되는 총에너지가 됩니다.

## 💡 오류 분석 및 해결

### 1. 문제 원인
* **초기 접근 1 (격자 이동 시뮬레이션)**: 주석에 언급된 것처럼, 시간을 0.5초, 1초 등 일정 간격으로 증가시키며 원자를 직접 이동시키는 방식은 언제 시뮬레이션을 멈춰야 할지, 무한히 충돌하지 않는 경우는 어떻게 처리할지 등 **종료 조건을 정하기 매우 어렵습니다.**
* **초기 접근 2 (수평/수직 충돌만 고려)**: 같은 행/열에 있는 원자들의 충돌만 고려하는 방식은, 주석처럼 대각선 방향에서 만나는 **더 빠른 충돌을 감지하지 못하는 논리적 오류**가 있습니다. 가장 먼저 일어나는 충돌을 찾아야 하는데, 일부 경우만 검사하기 때문에 오답이 발생합니다.

### 2. 해결 방법
* 두 실패의 근본적인 원인은 **시간 중심(time-centric)의 시뮬레이션**을 시도했기 때문입니다.
* 최종 코드의 해결 방법은 관점을 전환하여 **이벤트 중심(event-centric)의 시뮬레이션**을 구현한 것입니다.
* 즉, "0.5초 뒤에 무슨 일이 일어날까?"를 묻는 대신, "**다음에 일어날 수 있는 가장 빠른 충돌은 언제, 누구와 일어날까?**"를 먼저 계산합니다.
* 모든 원자 쌍의 충돌 시간/여부를 미리 계산하고 시간순으로 정렬함으로써, 복잡한 시뮬레이션 없이 가장 가까운 충돌부터 순서대로 처리할 수 있어 두 가지 초기 접근법의 문제를 모두 해결할 수 있습니다.

---

## 💻 코드
* [5648.py](5648.py)